(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,r){e.exports=r(24)},19:function(e,t,r){},24:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(5),s=r.n(o),i=(r(19),r(6)),l=r(1),c=r(2),u=r.n(c),m=r(3),d=r(7),h=r(8),p=r(11),g=r(9),b=r(12),f=r(10),w=function(e){var t=new RegExp(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi);return!e.match(t)},E=function(e){return!new RegExp("^[a-z-]+$").test(e)},v=function(e){var t=e.url,r=e.errors,a=void 0===r?"":r,o=e.isCompleted,s=void 0!==o&&o,i=e.isWorking,l=void 0!==i&&i,c=e.handleFormChange;return n.a.createElement("div",{className:"input-group mb-3 input-group-lg"},n.a.createElement("input",{name:"longURL",type:"url",className:"form-control ".concat(""===a?"":"is-invalid"," ").concat(s?"form-control-plaintext":""),"aria-label":"Destination url","aria-describedby":"Enter the url which you want to redirect to",autoFocus:!0,required:!0,placeholder:"destination url",title:"Enter the url which you want to redirect to",disabled:l||s,onChange:function(e){return c(e)},value:t}),n.a.createElement("div",{className:"invalid-feedback"},a))},k=function(){return n.a.createElement("div",{className:"text-center"},n.a.createElement("i",{className:"fas fa-arrow-down h3 my-2"}))},y=function(e){var t=e.url,r=e.errors,a=void 0===r?"":r,o=e.isCompleted,s=void 0!==o&&o,i=e.isWorking,l=void 0!==i&&i,c=e.handleFormChange;return s?n.a.createElement("div",{className:"input-group input-group-lg mt-3 mb-5"},n.a.createElement("input",{id:"shortURLFinal",type:"text",name:"shortURL",className:"form-control form-control-plaintext","aria-label":"Short url","aria-describedby":"Short url you assigned",required:!0,disabled:!0,value:"atomurl.ga/go/".concat(t)}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement(f.CopyToClipboard,{text:"atomurl.ga/go/".concat(t)},n.a.createElement("button",{className:"btn btn-info",type:"button",id:"button-addon2",title:"Copy to clipboard"},n.a.createElement("i",{className:"far fa-copy"}))))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-block d-md-none text-muted font-weight-light font-italic"},"atomurl.ga/go/".concat(t)),n.a.createElement("div",{className:"input-group input-group-lg mt-3 mb-5"},n.a.createElement("div",{className:"input-group-prepend d-none d-md-block"},n.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"atomurl.ga/go/")),n.a.createElement("input",{id:"shortURLFinal",type:"text",name:"shortURL",className:"form-control ".concat(""===a?"":"is-invalid"),"aria-label":"Short url","aria-describedby":"Enter short url which you wish to assign",title:"Enter short url which you wish to assign",required:!0,placeholder:"short url",disabled:l,onChange:function(e){return c(e)},value:t}),n.a.createElement("div",{className:"invalid-feedback"},a)))},R=function(e){var t=e.isWorking,r=void 0!==t&&t,a=e.isCompleted,o=void 0!==a&&a,s=e.startNewForm,i=e.linkBothUrls;return o?n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-lg mr-3",onClick:function(e){return s(e)}},"Successfully linked, Add more ?")):n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{type:"submit",className:"btn btn-info btn-lg",onClick:function(e){return i(e)},disabled:r},n.a.createElement("div",{className:"d-flex"},r?"Checking and adding url":"Link both of the above urls",n.a.createElement("span",{className:"spinner-grow spinner-grow-md ml-3 fade animate-all ".concat(r?"":"d-none"),role:"status","aria-hidden":"true"}))))},U=function(e){function t(){var e,r;Object(d.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={longURLErrors:"",longURL:"",shortURLErrors:"",shortURL:"",isWorking:!1,isCompleted:!1},r.linkBothUrls=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,o,s,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=r.state,n=a.longURL,o=a.shortURL,s="",i="",w(n)&&(s="URL should be of format <http>://domain.<tld>"),0===o.length?i="This cannot be empty":E(o)?i="Shortened url can only contain small letters and hyphens ( - )":"-"!==o.trim().slice(0,1)&&"-"!==o.trim().slice(-1)||(i="It cannot start or end with hyphen ( - )"),s||i?r.setState({longURLErrors:s,shortURLErrors:i}):r.checkAndShortURL(n,o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.startNewForm=function(e){e.preventDefault(),r.setState({isWorking:!1,isCompleted:!1,longURL:"",shortURL:"",longURLErrors:"",shortURLErrors:""})},r.handleFormChange=function(e){var t,a="",n=e.target,o=n.name,s=n.value;"longURL"===o?a="longURLErrors":"shortURL"===o&&(a="shortURLErrors"),r.setState((t={},Object(l.a)(t,o,s),Object(l.a)(t,a,""),t))},r}return Object(b.a)(t,e),Object(h.a)(t,[{key:"checkAndShortURL",value:function(){var e=Object(m.a)(u.a.mark(function e(t,r){var a,n,o,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({destinationURL:t.trim(),shortURL:r.trim()}),e.next=3,this.setState({isWorking:!0});case 3:return e.prev=3,e.next=6,fetch("/api/add",{headers:{"Content-Type":"application/json"},method:"POST",mode:"cors",body:a});case 6:return n=e.sent,e.next=9,n.status;case 9:return o=e.sent,e.next=12,n.json();case 12:if(!(s=e.sent)){e.next=22;break}if(201!==o){e.next=19;break}return e.next=17,this.setState({isWorking:!1,isCompleted:!0});case 17:e.next=20;break;case 19:throw Object(i.a)({},s,{status:o});case 20:e.next=23;break;case 22:throw"UNKNOW_ERROR";case 23:e.next=32;break;case 25:return e.prev=25,e.t0=e.catch(3),l="",l=e.t0&&e.t0.status?409===e.t0.status?"Short url already take, please try something else":e.t0.error:"Something terrible happened while we tried linking the url, try again later",e.next=31,this.setState({isWorking:!1,isCompleted:!1,shortURLErrors:l});case 31:console.error("Error in linking url",e.t0);case 32:case"end":return e.stop()}},e,this,[[3,25]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isCompleted,r=e.isWorking,a=e.longURL,o=e.longURLErrors,s=e.shortURL,i=e.shortURLErrors,l=this.handleFormChange,c=this.linkBothUrls,u=this.startNewForm;return n.a.createElement("main",null,n.a.createElement("header",{className:"App-header"},"AtomURL"),n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col col-md-6"},n.a.createElement("div",{className:"box-card shadow-lg rounded bg-white p-3 p-md-5"},n.a.createElement("form",null,n.a.createElement(v,{url:a,handleFormChange:l,errors:o,isWorking:r,isCompleted:t}),n.a.createElement(k,null),n.a.createElement(y,{url:s,handleFormChange:l,errors:i,isWorking:r,isCompleted:t}),n.a.createElement(R,{isCompleted:t,isWorking:r,linkBothUrls:c,startNewForm:u})))))))}}]),t}(n.a.Component);s.a.render(n.a.createElement(U,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.bfb75dc2.chunk.js.map