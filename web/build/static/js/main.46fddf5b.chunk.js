(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(23)},18:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),i=a.n(s),o=(a(18),a(2)),l=a(1),c=a.n(l),u=a(3),m=a(6),d=a(7),p=a(10),h=a(8),g=a(11),b=a(9),f=function(e){var t=new RegExp(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi);return!e.match(t)},E=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={longURLErrors:"",longURL:"",shortURLErrors:"",shortURL:"",isWorking:!1,isCompleted:!1},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"checkAndShortURL",value:function(){var e=Object(u.a)(c.a.mark(function e(t,a){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify({destinationURL:t.trim(),shortURL:a.trim()}),e.next=3,this.setState({isWorking:!0});case 3:return e.prev=3,e.next=6,fetch("/api/add",{headers:{"Content-Type":"application/json"},method:"POST",mode:"cors",body:n});case 6:return r=e.sent,e.next=9,r.status;case 9:if(201!==e.sent){e.next=15;break}return e.next=13,this.setState({isWorking:!1,isCompleted:!0});case 13:e.next=17;break;case 15:return e.next=17,this.setState({isWorking:!1,isCompleted:!1});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.error(e.t0);case 22:case"end":return e.stop()}},e,this,[[3,19]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"generateURL",value:function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=this.state,n=a.longURL,r=a.shortURL,s="",i="",f(n)&&(s="URL should be of format <http>://domain.<tld>"),0===r.length?i="This cannot be empty":(o=r,new RegExp("^[a-z-]+$").test(o)?"-"!==r.trim().slice(0,1)&&"-"!==r.trim().slice(-1)||(i="It cannot start or end with hyphen ( - )"):i="Shortened url can only contain small letters and hyphens ( - )"),s||i?this.setState({longURLErrors:s,shortURLErrors:i}):this.checkAndShortURL(n,r);case 7:case"end":return e.stop()}var o},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"startNew",value:function(e){e.preventDefault(),this.setState({isWorking:!1,isCompleted:!1,longURL:"",shortURL:"",longURLErrors:"",shortURLErrors:""})}},{key:"handleFormChange",value:function(e){var t,a="",n=e.target,r=n.name,s=n.value;"longURL"===r?a="longURLErrors":"shortURL"===r&&(a="shortURLErrors"),this.setState((t={},Object(o.a)(t,r,s),Object(o.a)(t,a,""),t))}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement("header",{className:"App-header"},"AtomURL"),r.a.createElement("div",{className:"container main-section"},r.a.createElement("div",{className:"box-card shadow-lg rounded bg-white p-5"},r.a.createElement("form",null,r.a.createElement("div",{className:"input-group mb-3 input-group-lg"},r.a.createElement("input",{name:"longURL",type:"url",className:"form-control ".concat(""===this.state.longURLErrors?"":"is-invalid"," ").concat(this.state.isCompleted?"form-control-plaintext":""),"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:function(t){return e.handleFormChange(t)},autoFocus:!0,required:!0,placeholder:"Destination URL",disabled:this.state.isWorking||this.state.isCompleted,value:this.state.longURL}),r.a.createElement("div",{className:"invalid-feedback"},this.state.longURLErrors)),r.a.createElement("div",{className:"text-center"},r.a.createElement("i",{className:"fas fa-arrow-down h3 my-2"})),r.a.createElement("div",{className:"input-group input-group-lg mt-3 mb-5"},!this.state.isCompleted&&r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"atomurl.ga/go/")),this.state.isCompleted?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:"shortURLFinal",type:"text",name:"shortURL",className:"form-control form-control-plaintext","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",value:"atomurl.ga/go/".concat(this.state.shortURL),required:!0,disabled:!0}),r.a.createElement("div",{class:"input-group-append"},r.a.createElement(b.CopyToClipboard,{text:"atomurl.ga/go/".concat(this.state.shortURL)},r.a.createElement("button",{class:"btn btn-info",type:"button",id:"button-addon2"},r.a.createElement("i",{class:"far fa-copy"}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",name:"shortURL",className:"form-control ".concat(""===this.state.shortURLErrors?"":"is-invalid"),"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",onChange:function(t){return e.handleFormChange(t)},value:this.state.shortURL,required:!0,placeholder:"Short URL",disabled:this.state.isWorking}),r.a.createElement("div",{className:"invalid-feedback"},this.state.shortURLErrors))),r.a.createElement("div",{className:"text-center"},this.state.isCompleted?r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-lg mr-3",onClick:function(t){return e.startNew(t)}},"Successfully created, Add more ?"):r.a.createElement("button",{type:"submit",className:"btn btn-info btn-lg",onClick:function(t){return e.generateURL(t)},disabled:this.state.isWorking},r.a.createElement("div",{className:"d-flex"},this.state.isWorking?"Checking and adding URL":"Assign the above URL",r.a.createElement("span",{class:"spinner-grow spinner-grow-md ml-3 fade animate-all ".concat(this.state.isWorking?"":"d-none"),role:"status","aria-hidden":"true"}))))))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.46fddf5b.chunk.js.map